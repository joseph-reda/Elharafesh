{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nehru\\\\OneDrive\\\\Desktop\\\\book_store\\\\src\\\\pages\\\\Category.jsx\",\n  _s = $RefreshSig$();\nimport { useParams, Link } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport BookCard from \"../components/BookCard\";\nimport CategoryCard from \"../components/CategoryCard\";\nimport ScrollTopButton from \"../components/ScrollTopButton\";\nimport { fetchBooks } from \"../services/booksService\"; // ✅ استيراد الخدمة\nimport { useQuery } from \"@tanstack/react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst categories = [\"رواية\", \"غير روائي\", \"مترجم\", \"عربي\"];\nexport default function Category() {\n  _s();\n  const {\n    name\n  } = useParams();\n  const {\n    data: books = [],\n    isLoading,\n    error\n  } = useQuery({\n    queryKey: [\"books\"],\n    queryFn: fetchBooks // ✅ استخدام خدمة Firebase\n  });\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-red-600 py-10\",\n      children: \"\\u274C \\u062D\\u062F\\u062B \\u062E\\u0637\\u0623 \\u0623\\u062B\\u0646\\u0627\\u0621 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, this);\n  }\n\n  // ترتيب الكتب وفلترة حسب التصنيف كما في النسخة السابقة\n  const sortedBooks = [...books].sort((a, b) => {\n    if (a.status === \"available\" && b.status === \"sold\") return -1;\n    if (a.status === \"sold\" && b.status === \"available\") return 1;\n    return b.id - a.id;\n  });\n  const filteredBooks = name ? sortedBooks.filter(book => {\n    var _book$category, _book$type;\n    const cat = ((_book$category = book.category) === null || _book$category === void 0 ? void 0 : _book$category.toLowerCase()) || \"\";\n    const type = ((_book$type = book.type) === null || _book$type === void 0 ? void 0 : _book$type.toLowerCase()) || \"\";\n    const n = name.toLowerCase();\n    if (n === \"مترجم\") return [\"أجنبي\", \"عالمي\", \"مترجم\"].includes(type);\n    if (n === \"عربي\") return type.includes(\"عربي\");\n    if (n === \"غير روائي\") return !cat.includes(\"رواية\");\n    return cat.includes(n);\n  }) : sortedBooks;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 py-10 text-right font-sans space-y-10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(Category, \"Qyg52igsybvgAkuQzQ8XOmtr1So=\", false, function () {\n  return [useParams, useQuery];\n});\n_c = Category;\nvar _c;\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["useParams","Link","motion","BookCard","CategoryCard","ScrollTopButton","fetchBooks","useQuery","jsxDEV","_jsxDEV","categories","Category","_s","name","data","books","isLoading","error","queryKey","queryFn","className","children","fileName","_jsxFileName","lineNumber","columnNumber","sortedBooks","sort","a","b","status","id","filteredBooks","filter","book","_book$category","_book$type","cat","category","toLowerCase","type","n","includes","_c","$RefreshReg$"],"sources":["C:/Users/nehru/OneDrive/Desktop/book_store/src/pages/Category.jsx"],"sourcesContent":["import { useParams, Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport BookCard from \"../components/BookCard\";\r\nimport CategoryCard from \"../components/CategoryCard\";\r\nimport ScrollTopButton from \"../components/ScrollTopButton\";\r\nimport { fetchBooks } from \"../services/booksService\"; // ✅ استيراد الخدمة\r\nimport { useQuery } from \"@tanstack/react-query\";\r\n\r\nconst categories = [\"رواية\", \"غير روائي\", \"مترجم\", \"عربي\"];\r\n\r\nexport default function Category() {\r\n    const { name } = useParams();\r\n\r\n    const { data: books = [], isLoading, error } = useQuery({\r\n        queryKey: [\"books\"],\r\n        queryFn: fetchBooks, // ✅ استخدام خدمة Firebase\r\n    });\r\n\r\n    if (error) {\r\n        return (\r\n            <p className=\"text-center text-red-600 py-10\">\r\n                ❌ حدث خطأ أثناء تحميل البيانات\r\n            </p>\r\n        );\r\n    }\r\n\r\n    // ترتيب الكتب وفلترة حسب التصنيف كما في النسخة السابقة\r\n    const sortedBooks = [...books].sort((a, b) => {\r\n        if (a.status === \"available\" && b.status === \"sold\") return -1;\r\n        if (a.status === \"sold\" && b.status === \"available\") return 1;\r\n        return b.id - a.id;\r\n    });\r\n\r\n    const filteredBooks = name\r\n        ? sortedBooks.filter((book) => {\r\n            const cat = book.category?.toLowerCase() || \"\";\r\n            const type = book.type?.toLowerCase() || \"\";\r\n            const n = name.toLowerCase();\r\n\r\n            if (n === \"مترجم\") return [\"أجنبي\", \"عالمي\", \"مترجم\"].includes(type);\r\n            if (n === \"عربي\") return type.includes(\"عربي\");\r\n            if (n === \"غير روائي\") return !cat.includes(\"رواية\");\r\n            return cat.includes(n);\r\n        })\r\n        : sortedBooks;\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto px-4 py-10 text-right font-sans space-y-10\">\r\n            {/* باقي الكود كما هو... */}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AAClD,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,YAAY,MAAM,4BAA4B;AACrD,OAAOC,eAAe,MAAM,+BAA+B;AAC3D,SAASC,UAAU,QAAQ,0BAA0B,CAAC,CAAC;AACvD,SAASC,QAAQ,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,UAAU,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,CAAC;AAE1D,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAC/B,MAAM;IAAEC;EAAK,CAAC,GAAGb,SAAS,CAAC,CAAC;EAE5B,MAAM;IAAEc,IAAI,EAAEC,KAAK,GAAG,EAAE;IAAEC,SAAS;IAAEC;EAAM,CAAC,GAAGV,QAAQ,CAAC;IACpDW,QAAQ,EAAE,CAAC,OAAO,CAAC;IACnBC,OAAO,EAAEb,UAAU,CAAE;EACzB,CAAC,CAAC;EAEF,IAAIW,KAAK,EAAE;IACP,oBACIR,OAAA;MAAGW,SAAS,EAAC,gCAAgC;MAAAC,QAAA,EAAC;IAE9C;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAEZ;;EAEA;EACA,MAAMC,WAAW,GAAG,CAAC,GAAGX,KAAK,CAAC,CAACY,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;IAC1C,IAAID,CAAC,CAACE,MAAM,KAAK,WAAW,IAAID,CAAC,CAACC,MAAM,KAAK,MAAM,EAAE,OAAO,CAAC,CAAC;IAC9D,IAAIF,CAAC,CAACE,MAAM,KAAK,MAAM,IAAID,CAAC,CAACC,MAAM,KAAK,WAAW,EAAE,OAAO,CAAC;IAC7D,OAAOD,CAAC,CAACE,EAAE,GAAGH,CAAC,CAACG,EAAE;EACtB,CAAC,CAAC;EAEF,MAAMC,aAAa,GAAGnB,IAAI,GACpBa,WAAW,CAACO,MAAM,CAAEC,IAAI,IAAK;IAAA,IAAAC,cAAA,EAAAC,UAAA;IAC3B,MAAMC,GAAG,GAAG,EAAAF,cAAA,GAAAD,IAAI,CAACI,QAAQ,cAAAH,cAAA,uBAAbA,cAAA,CAAeI,WAAW,CAAC,CAAC,KAAI,EAAE;IAC9C,MAAMC,IAAI,GAAG,EAAAJ,UAAA,GAAAF,IAAI,CAACM,IAAI,cAAAJ,UAAA,uBAATA,UAAA,CAAWG,WAAW,CAAC,CAAC,KAAI,EAAE;IAC3C,MAAME,CAAC,GAAG5B,IAAI,CAAC0B,WAAW,CAAC,CAAC;IAE5B,IAAIE,CAAC,KAAK,OAAO,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,CAACC,QAAQ,CAACF,IAAI,CAAC;IACpE,IAAIC,CAAC,KAAK,MAAM,EAAE,OAAOD,IAAI,CAACE,QAAQ,CAAC,MAAM,CAAC;IAC9C,IAAID,CAAC,KAAK,WAAW,EAAE,OAAO,CAACJ,GAAG,CAACK,QAAQ,CAAC,OAAO,CAAC;IACpD,OAAOL,GAAG,CAACK,QAAQ,CAACD,CAAC,CAAC;EAC1B,CAAC,CAAC,GACAf,WAAW;EAEjB,oBACIjB,OAAA;IAAKW,SAAS,EAAC;EAA8D;IAAAE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAExE,CAAC;AAEd;AAACb,EAAA,CAzCuBD,QAAQ;EAAA,QACXX,SAAS,EAEqBO,QAAQ;AAAA;AAAAoC,EAAA,GAHnChC,QAAQ;AAAA,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}