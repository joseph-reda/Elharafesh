{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nehru\\\\OneDrive\\\\Desktop\\\\book_store\\\\src\\\\pages\\\\Category.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Category.jsx\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { motion } from \"framer-motion\"; // هذا السطر اللي كان ناقص\nimport BookCard from \"../components/BookCard\";\nimport { ClipLoader } from \"react-spinners\";\nimport { ref, get, query, orderByChild, equalTo } from \"firebase/database\";\nimport { db } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Category() {\n  _s();\n  const {\n    name\n  } = useParams();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        setLoading(true);\n        let booksRef = ref(db, \"books\");\n\n        // إذا كان في تصنيف محدد\n        if (name && name !== \"all\") {\n          booksRef = query(booksRef, orderByChild(\"category\"), equalTo(name));\n        }\n        const snapshot = await get(booksRef);\n        if (snapshot.exists()) {\n          const data = snapshot.val();\n          const booksList = Object.entries(data).map(([key, value]) => ({\n            key,\n            ...value\n          }));\n\n          // ترتيب حسب الأحدث\n          booksList.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));\n          setBooks(booksList);\n        } else {\n          setBooks([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching books:\", error);\n        setBooks([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBooks();\n  }, [name]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(ClipLoader, {\n        size: 70,\n        color: \"#4F46E5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"py-12 px-4 max-w-7xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n      initial: {\n        opacity: 0,\n        y: -30\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"text-4xl md:text-5xl font-extrabold text-center mb-12 bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent\",\n      children: name && name !== \"all\" ? `تصنيف: ${name}` : \"جميع الكتب\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), books.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-3xl text-gray-500 font-medium\",\n        children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0643\\u062A\\u0628 \\u0641\\u064A \\u0647\\u0630\\u0627 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641 \\u062D\\u0627\\u0644\\u064A\\u064B\\u0627\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-gray-400 mt-4\",\n        children: \"\\u062A\\u0627\\u0628\\u0639\\u0646\\u0627.. \\u0642\\u0631\\u064A\\u0628\\u064B\\u0627 \\u062C\\u062F\\u064A\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\",\n      children: books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n        book: book\n      }, book.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n_s(Category, \"kXjkTdqf8/JqBZ9Yho+JSMBx1hk=\", false, function () {\n  return [useParams];\n});\n_c = Category;\nvar _c;\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["useState","useEffect","useParams","motion","BookCard","ClipLoader","ref","get","query","orderByChild","equalTo","db","jsxDEV","_jsxDEV","Category","_s","name","books","setBooks","loading","setLoading","fetchBooks","booksRef","snapshot","exists","data","val","booksList","Object","entries","map","key","value","sort","a","b","createdAt","error","console","className","children","size","color","fileName","_jsxFileName","lineNumber","columnNumber","h1","initial","opacity","y","animate","length","book","_c","$RefreshReg$"],"sources":["C:/Users/nehru/OneDrive/Desktop/book_store/src/pages/Category.jsx"],"sourcesContent":["// src/pages/Category.jsx\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";          // هذا السطر اللي كان ناقص\r\nimport BookCard from \"../components/BookCard\";\r\nimport { ClipLoader } from \"react-spinners\";\r\nimport { ref, get, query, orderByChild, equalTo } from \"firebase/database\";\r\nimport { db } from \"../firebase\";\r\n\r\nexport default function Category() {\r\n    const { name } = useParams();\r\n    const [books, setBooks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchBooks = async () => {\r\n            try {\r\n                setLoading(true);\r\n                let booksRef = ref(db, \"books\");\r\n\r\n                // إذا كان في تصنيف محدد\r\n                if (name && name !== \"all\") {\r\n                    booksRef = query(booksRef, orderByChild(\"category\"), equalTo(name));\r\n                }\r\n\r\n                const snapshot = await get(booksRef);\r\n                if (snapshot.exists()) {\r\n                    const data = snapshot.val();\r\n                    const booksList = Object.entries(data).map(([key, value]) => ({\r\n                        key,\r\n                        ...value,\r\n                    }));\r\n\r\n                    // ترتيب حسب الأحدث\r\n                    booksList.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));\r\n                    setBooks(booksList);\r\n                } else {\r\n                    setBooks([]);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching books:\", error);\r\n                setBooks([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchBooks();\r\n    }, [name]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <ClipLoader size={70} color=\"#4F46E5\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"py-12 px-4 max-w-7xl mx-auto\">\r\n            <motion.h1\r\n                initial={{ opacity: 0, y: -30 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"text-4xl md:text-5xl font-extrabold text-center mb-12 bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent\"\r\n            >\r\n                {name && name !== \"all\" ? `تصنيف: ${name}` : \"جميع الكتب\"}\r\n            </motion.h1>\r\n\r\n            {books.length === 0 ? (\r\n                <div className=\"text-center py-20\">\r\n                    <p className=\"text-3xl text-gray-500 font-medium\">\r\n                        لا توجد كتب في هذا التصنيف حاليًا\r\n                    </p>\r\n                    <p className=\"text-lg text-gray-400 mt-4\">\r\n                        تابعنا.. قريبًا جديد\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\r\n                    {books.map((book) => (\r\n                        <BookCard key={book.key} book={book} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}